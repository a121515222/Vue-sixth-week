(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45d58a89"],{"159b":function(t,e,c){var n=c("da84"),a=c("fdbc"),o=c("785a"),i=c("17c2"),l=c("9112"),r=function(t){if(t&&t.forEach!==i)try{l(t,"forEach",i)}catch(e){t.forEach=i}};for(var u in a)a[u]&&r(n[u]&&n[u].prototype);r(o)},"17c2":function(t,e,c){"use strict";var n=c("b727").forEach,a=c("a640"),o=a("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,c){"use strict";var n=c("23e7"),a=c("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"94ad":function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var n=c("7a23"),a={class:"container"},o={class:"row py-5"},i=Object(n["g"])("h2",null,"產品列表",-1),l={class:"d-flex justify-content-end"},r={class:"col-12 py-3"},u={class:"border rounded"},s={class:"table table-hover"},d=Object(n["g"])("tr",null,[Object(n["g"])("th",null,"產品名稱"),Object(n["g"])("th",null,"原價"),Object(n["g"])("th",null,"售價"),Object(n["g"])("th",null,"是否啟用"),Object(n["g"])("th",null,"查看細節"),Object(n["g"])("th"),Object(n["g"])("th")],-1),p=["data-index","onClick"],b=["data-index","onClick"],g=["onClick"],O={class:"px-1"},j=Object(n["g"])("h2",null,"單一產品細節",-1),f={class:"col-8 mx-auto py-3"},m={class:"card"},h={class:"card-body"},v={class:"img"},y=["src"],D={class:"badge bg-primary"},k={class:"d-flex"},w={class:"line-through px-2 fw-light text-black-50"},P={class:"d-flex gap-3 py-3"},x=["src"],U={key:1};function M(t,e,c,M,C,I){var S=Object(n["E"])("Pagination"),_=Object(n["E"])("AdminProductModal");return Object(n["y"])(),Object(n["f"])("div",a,[Object(n["g"])("div",o,[i,Object(n["g"])("div",l,[Object(n["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=function(t){C.isNew=!0,I.openModal()})}," 增加商品 ")]),Object(n["g"])("div",r,[Object(n["g"])("div",u,[Object(n["g"])("table",s,[d,(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(C.products,(function(t,e){return Object(n["y"])(),Object(n["f"])("tr",{key:t.id+e},[Object(n["g"])("td",null,Object(n["H"])(t.title),1),Object(n["g"])("td",null,Object(n["H"])(t.origin_price),1),Object(n["g"])("td",null,Object(n["H"])(t.price),1),Object(n["g"])("td",null,Object(n["H"])(I.productStatus(t.is_enabled)),1),Object(n["g"])("td",null,[Object(n["g"])("button",{class:"btn btn-outline-primary","data-index":e,type:"button",onClick:function(e){return I.showProduct(t)}},"查看細節",8,p)]),Object(n["g"])("td",null,[Object(n["g"])("button",{class:"btn btn-outline-success","data-index":e,type:"button",onClick:function(e){C.postId=t.id,C.isNew=!1,I.openModal(t)}},"編輯",8,b)]),Object(n["g"])("td",null,[Object(n["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:function(e){C.postId=t.id,I.deleteProduct()}},"刪除",8,g)])])})),128))]),Object(n["g"])("p",O,"一共有"+Object(n["H"])(C.products.length)+"項產品",1)]),Object(n["j"])(S,{pagination:C.page,onSendPage:I.getProduct},null,8,["pagination","onSendPage"])]),j,Object(n["g"])("div",f,[C.productTemp.id?(Object(n["y"])(),Object(n["f"])(n["a"],{key:0},[Object(n["g"])("div",m,[Object(n["g"])("div",h,[Object(n["g"])("div",v,[Object(n["g"])("img",{class:"img-fluid",src:C.productTemp.imageUrl,alt:""},null,8,y)]),Object(n["g"])("div",Object(n["q"])({class:""},Object(n["I"])(t.d-t.flex)),[Object(n["g"])("p",null,[Object(n["i"])(Object(n["H"])(C.productTemp.title),1),Object(n["g"])("span",D,Object(n["H"])(C.productTemp.category),1)])],16),Object(n["g"])("p",null,"商品描述:"+Object(n["H"])(C.productTemp.description),1),Object(n["g"])("p",null,"商品內容:"+Object(n["H"])(C.productTemp.content),1),Object(n["g"])("div",k,[Object(n["g"])("span",null,Object(n["H"])(C.productTemp.price),1),Object(n["g"])("span",w,Object(n["H"])(C.productTemp.origin_price),1),Object(n["g"])("span",null,"元/"+Object(n["H"])(C.productTemp.unit),1)])])]),Object(n["g"])("div",P,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(C.productTemp.imagesUrl,(function(t,e){return Object(n["y"])(),Object(n["f"])("div",{class:"w-25",key:t+e},[Object(n["g"])("img",{src:t,alt:""},null,8,x)])})),128))])],64)):(Object(n["y"])(),Object(n["f"])("p",U,"請選擇一個商品查看"))])]),Object(n["j"])(_,{"input-product":C.inputProductOut,"is-new":C.isNew,onSendInputData:I.editProductList,onSendCloseResetInput:I.resetModal,ref:"myModal"},null,8,["input-product","is-new","onSendInputData","onSendCloseResetInput"])])}c("4160"),c("d3b7"),c("159b"),c("b64b"),c("99af");var C={"aria-label":"Page navigation example"},I={class:"pagination"},S=Object(n["g"])("span",{"aria-hidden":"true"},"«",-1),_=[S],H=["onClick"],N=Object(n["g"])("span",{"aria-hidden":"true"},"»",-1),$=[N];function T(t,e,c,a,o,i){return Object(n["y"])(),Object(n["f"])("nav",C,[Object(n["g"])("ul",I,[Object(n["g"])("li",{class:Object(n["s"])(["page-item",{disabled:!c.pagination.has_pre}])},[Object(n["g"])("a",{class:"page-link",onClick:e[0]||(e[0]=Object(n["T"])((function(e){return t.$emit("sendPage",c.pagination.current_page-1)}),["prevent"])),href:"#","aria-label":"Previous"},_)],2),(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(c.pagination.total_pages,(function(e){return Object(n["y"])(),Object(n["f"])("li",{class:Object(n["s"])(["page-item",{active:e===c.pagination.current_page}]),key:e+"page"},[Object(n["g"])("a",{class:"page-link",onClick:Object(n["T"])((function(c){return t.$emit("sendPage",e)}),["prevent"]),href:"#"},Object(n["H"])(e),9,H)],2)})),128)),Object(n["g"])("li",{class:Object(n["s"])(["page-item",{disabled:!c.pagination.has_next}])},[Object(n["g"])("a",{class:"page-link",onClick:e[1]||(e[1]=Object(n["T"])((function(e){return t.$emit("sendPage",c.pagination.current_page+1)}),["prevent"])),href:"#","aria-label":"Next"},$)],2)])])}var E={props:["pagination"]},V=c("6b0d"),F=c.n(V);const A=F()(E,[["render",T]]);var J=A,L={class:"modal fade",id:"modalInputData",tabindex:"-1","aria-hidden":"true",ref:"productModal"},R={class:"modal-dialog modal-xl"},q={class:"modal-content"},B={class:"modal-header"},z={class:"modal-title",id:"exampleModalLabel"},G={class:"modal-body"},K={class:"row"},Q={class:"col-4 my-3"},W=Object(n["g"])("p",null,"主要圖片",-1),X=["src","alt","title"],Y={class:"from-group my-3"},Z=Object(n["g"])("label",{class:"form-label w-100",for:"productImageUrl"},"主要產品圖片",-1),tt=["src","alt"],et={class:"form-label w-100",for:"productImageUrl"},ct=["onUpdate:modelValue"],nt={class:"col-8 my-3"},at={class:"from-group my-3"},ot=Object(n["g"])("label",{class:"form-label w-100",for:"productName"},"產品名稱",-1),it={class:"from-group my-3"},lt=Object(n["g"])("label",{class:"form-label w-100",for:"productCategory"},"產品分類",-1),rt={class:"from-group my-3"},ut=Object(n["g"])("label",{class:"form-label w-100",for:"productContent"},"產品內容",-1),st={class:"d-flex gap-2"},dt={class:"from-group my-3 w-50"},pt=Object(n["g"])("label",{class:"form-label w-100",for:"productOrigin_price"},"產品原價",-1),bt={class:"from-group my-3 w-50"},gt=Object(n["g"])("label",{class:"form-label w-100",for:"productPrice"},"產品售價",-1),Ot={class:"d-flex gap-2"},jt={class:"from-group my-3 w-50"},ft=Object(n["g"])("label",{for:"is_enabled",class:"w-100"},"產品狀態",-1),mt=Object(n["h"])('<option value="" disabled>請選擇產品狀態</option><option value="0">未上架</option><option value="1">已上架</option><option value="2">缺貨中</option><option value="3">補貨中</option><option value="4">促銷中</option><option value="5">待下架</option>',7),ht=[mt],vt={class:"from-group my-3 w-50"},yt=Object(n["g"])("label",{class:"form-label w-100",for:"productUnit"},"產品單位",-1),Dt={class:"from-group my-3"},kt=Object(n["g"])("label",{class:"form-label w-100",for:"productDescription"},"產品分類",-1),wt={class:"modal-footer"};function Pt(t,e,c,a,o,i){var l,r,u;return Object(n["y"])(),Object(n["f"])("div",L,[Object(n["g"])("div",R,[Object(n["g"])("div",q,[Object(n["g"])("div",B,[Object(n["g"])("h5",z,Object(n["H"])(c.isNew?"新增產品":"編輯產品"),1),Object(n["g"])("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=function(t){return i.close()})})]),Object(n["g"])("div",G,[Object(n["g"])("div",K,[Object(n["g"])("div",Q,[W,Object(n["g"])("div",null,[Object(n["g"])("img",{src:o.inputData.imageUrl,alt:o.inputData.title,title:o.inputData.title,class:"img-fluid"},null,8,X)]),Object(n["g"])("div",Y,[Z,Object(n["S"])(Object(n["g"])("input",{type:"text",id:"productImageUrl",placeholder:"請輸入主要產品圖片網址","onUpdate:modelValue":e[1]||(e[1]=function(t){return o.inputData.imageUrl=t}),class:"form-control"},null,512),[[n["M"],o.inputData.imageUrl,void 0,{trim:!0}]])]),(null===(l=o.inputData.imagesUrl)||void 0===l?void 0:l.length)>0?(Object(n["y"])(!0),Object(n["f"])(n["a"],{key:0},Object(n["D"])(o.inputData.imagesUrl,(function(t,e){return Object(n["y"])(),Object(n["f"])("div",{class:"from-group my-3",key:t+1},[Object(n["g"])("p",null,"其他圖片"+Object(n["H"])(e+1),1),Object(n["g"])("img",{src:t,class:"img-fluid",alt:o.inputData.title},null,8,tt),Object(n["g"])("label",et,"其他產品圖片"+Object(n["H"])(e+1),1),Object(n["S"])(Object(n["g"])("input",{type:"text",id:"productImageUrl",placeholder:"請輸其他產品圖片網址","onUpdate:modelValue":function(t){return o.inputData.imagesUrl[e]=t},class:"form-control"},null,8,ct),[[n["M"],o.inputData.imagesUrl[e],void 0,{trim:!0}]])])})),128)):Object(n["e"])("",!0),""!==o.inputData.imageUrl&&(null===(r=o.inputData.imagesUrl)||void 0===r?void 0:r.length)<5?(Object(n["y"])(),Object(n["f"])("button",{key:1,class:"btn btn-outline-success w-100 d-block my-3",onClick:e[2]||(e[2]=function(t){return i.addImg()})},"新增圖片")):Object(n["e"])("",!0),0!==(null===(u=o.inputData.imagesUrl)||void 0===u?void 0:u.length)?(Object(n["y"])(),Object(n["f"])("button",{key:2,class:"btn btn-outline-danger w-100 d-block",onClick:e[3]||(e[3]=function(t){return i.deleteImg()})},"刪除圖片")):Object(n["e"])("",!0)]),Object(n["g"])("div",nt,[Object(n["g"])("div",at,[ot,Object(n["S"])(Object(n["g"])("input",{type:"text",id:"productName",placeholder:"請輸入產品名稱","onUpdate:modelValue":e[4]||(e[4]=function(t){return o.inputData.title=t}),class:"form-control"},null,512),[[n["M"],o.inputData.title,void 0,{trim:!0}]])]),Object(n["g"])("div",it,[lt,Object(n["S"])(Object(n["g"])("input",{type:"text",id:"productCategory",placeholder:"請輸入產品分類","onUpdate:modelValue":e[5]||(e[5]=function(t){return o.inputData.category=t}),class:"form-control"},null,512),[[n["M"],o.inputData.category,void 0,{trim:!0}]])]),Object(n["g"])("div",rt,[ut,Object(n["S"])(Object(n["g"])("input",{type:"text",id:"productContent",placeholder:"請輸入產品內容","onUpdate:modelValue":e[6]||(e[6]=function(t){return o.inputData.content=t}),class:"form-control"},null,512),[[n["M"],o.inputData.content,void 0,{trim:!0}]])]),Object(n["g"])("div",st,[Object(n["g"])("div",dt,[pt,Object(n["S"])(Object(n["g"])("input",{type:"number",id:"productOrigin_price",placeholder:"請輸入產品原價","onUpdate:modelValue":e[7]||(e[7]=function(t){return o.inputData.origin_price=t}),class:"form-control"},null,512),[[n["M"],o.inputData.origin_price,void 0,{number:!0}]])]),Object(n["g"])("div",bt,[gt,Object(n["S"])(Object(n["g"])("input",{type:"number",id:"productPrice",placeholder:"請輸入產品售價","onUpdate:modelValue":e[8]||(e[8]=function(t){return o.inputData.price=t}),class:"form-control"},null,512),[[n["M"],o.inputData.price,void 0,{number:!0}]])])]),Object(n["g"])("div",Ot,[Object(n["g"])("div",jt,[ft,Object(n["S"])(Object(n["g"])("select",{name:"productStatus",id:"is_enabled",class:"form-select","onUpdate:modelValue":e[9]||(e[9]=function(t){return o.inputData.is_enabled=t})},ht,512),[[n["L"],o.inputData.is_enabled,void 0,{number:!0}]])]),Object(n["g"])("div",vt,[yt,Object(n["S"])(Object(n["g"])("input",{type:"text",id:"productUnit",placeholder:"請輸入產品單位","onUpdate:modelValue":e[10]||(e[10]=function(t){return o.inputData.unit=t}),class:"form-control"},null,512),[[n["M"],o.inputData.unit,void 0,{trim:!0}]])])]),Object(n["g"])("div",Dt,[kt,Object(n["S"])(Object(n["g"])("textarea",{name:"productDescription",class:"form-control",style:{height:"80px"},id:"productDescription",placeholder:"請輸入產品描述","onUpdate:modelValue":e[11]||(e[11]=function(t){return o.inputData.description=t})},null,512),[[n["M"],o.inputData.description]])])])])]),Object(n["g"])("div",wt,[Object(n["g"])("button",{type:"button",class:"btn btn-secondary",onClick:e[12]||(e[12]=function(t){return i.close()})},"關閉"),Object(n["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[13]||(e[13]=function(t){return i.editProductList()})},"確定")])])])],512)}c("e9c4");var xt=c("7c2b"),Ut=c.n(xt),Mt={props:["inputProduct","isNew"],data:function(){return{inputData:{},bsModal:""}},emits:["send-input-data","send-close-resetInput"],methods:{open:function(){this.bsModal.show()},close:function(){this.bsModal.hide(),this.$emit("send-close-resetInput")},editProductList:function(){this.$emit("send-input-data",this.inputData)},addImg:function(){this.inputData.imagesUrl.push("")},deleteImg:function(){this.inputData.imagesUrl.pop()}},watch:{inputProduct:{handler:function(t,e){this.inputData=JSON.parse(JSON.stringify(t))},deep:!0}},mounted:function(){this.bsModal=new Ut.a(this.$refs.productModal)}};const Ct=F()(Mt,[["render",Pt]]);var It=Ct,St={data:function(){return{page:{},isNew:!0,postId:"",products:[],productTemp:{},inputProductOut:{title:"",category:"",origin_price:null,price:null,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]}}},components:{AdminProductModal:It,Pagination:J},methods:{openModal:function(t){var e=this;this.$refs.myModal.open(),!1===this.isNew&&(Object.keys(t).forEach((function(c){Object.keys(e.inputProductOut).forEach((function(n){c===n&&(e.inputProductOut[n]=t[c])}))})),this.postId=t.id)},closeModal:function(){this.$refs.myModal.close()},showProduct:function(t){this.productTemp=t},resetModal:function(){this.inputProductOut={title:"",category:"",origin_price:null,price:null,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]}},editProductList:function(t){var e=this,c={data:{}};c.data=t,!0===this.isNew?this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/product"),c).then((function(t){console.log(t.data),alert(t.data.message),e.getProduct(),e.resetModal()}))["catch"]((function(t){console.log(t.response),alert(t.response.data.message)})):!1===this.isNew&&this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/product/").concat(this.postId),c).then((function(t){alert(t.data.message),e.getProduct(),e.closeModal(),e.postId=""}))["catch"]((function(t){console.dir(t.response),alert(t.response.data.message)}))},deleteProduct:function(){var t=this,e=prompt("請輸入delete");"delete"===e?this.$http["delete"]("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/product/").concat(this.postId)).then((function(e){alert(e.data.message),t.getProduct()}))["catch"]((function(t){alert(t.response.data.message)})):alert("輸入錯誤，不進行刪除")},productStatus:function(t){var e=null;switch(t){case 0:e="未上架";break;case 1:e="已上架";break;case 2:e="缺貨中";break;case 3:e="補貨中";break;case 4:e="促銷中";break;case 5:e="待下架";break}return e},getProduct:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;"/admin/adminProducts"===this.$route.fullPath&&this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/products?page=").concat(e)).then((function(e){t.products=e.data.products,t.page=e.data.pagination}))["catch"]((function(e){alert("".concat(e.response.data.message,",自動轉跳至登入頁")),"驗證錯誤, 請重新登入"===e.response.data.message&&t.$router.push("/logIn")}))}},mounted:function(){this.getProduct()}};const _t=F()(St,[["render",M]]);e["default"]=_t},a640:function(t,e,c){"use strict";var n=c("d039");t.exports=function(t,e){var c=[][t];return!!c&&n((function(){c.call(null,e||function(){return 1},1)}))}},b64b:function(t,e,c){var n=c("23e7"),a=c("7b0b"),o=c("df75"),i=c("d039"),l=i((function(){o(1)}));n({target:"Object",stat:!0,forced:l},{keys:function(t){return o(a(t))}})},e9c4:function(t,e,c){var n=c("23e7"),a=c("da84"),o=c("d066"),i=c("2ba4"),l=c("e330"),r=c("d039"),u=a.Array,s=o("JSON","stringify"),d=l(/./.exec),p=l("".charAt),b=l("".charCodeAt),g=l("".replace),O=l(1..toString),j=/[\uD800-\uDFFF]/g,f=/^[\uD800-\uDBFF]$/,m=/^[\uDC00-\uDFFF]$/,h=function(t,e,c){var n=p(c,e-1),a=p(c,e+1);return d(f,t)&&!d(m,a)||d(m,t)&&!d(f,n)?"\\u"+O(b(t,0),16):t},v=r((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:v},{stringify:function(t,e,c){for(var n=0,a=arguments.length,o=u(a);n<a;n++)o[n]=arguments[n];var l=i(s,null,o);return"string"==typeof l?g(l,j,h):l}})}}]);
//# sourceMappingURL=chunk-45d58a89.28899c7e.js.map